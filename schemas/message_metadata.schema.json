{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "message_metadata.schema.json",
  "title": "Message Metadata",
  "description": "Cached metadata about a processed message",
  "type": "object",
  "required": ["message_id", "char_count", "has_activity_signal", "has_profile_signal", "processing_time"],
  "properties": {
    "message_id": {
      "type": "string"
    },
    "char_count": {
      "type": "integer",
      "minimum": 0
    },
    "has_activity_signal": {
      "type": "boolean"
    },
    "has_profile_signal": {
      "type": "boolean"
    },
    "activity_categories": {
      "type": "array",
      "items": {"type": "string"}
    },
    "profile_categories": {
      "type": "array",
      "items": {"type": "string"}
    },
    "processing_time": {
      "type": "string",
      "format": "date-time"
    },
    "cached_inferences": {
      "type": "object",
      "description": "Cached inference results to avoid reprocessing"
    }
  }
}